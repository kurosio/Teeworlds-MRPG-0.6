
:root{
  /* Strict, high-contrast dark UI */
  --editor-bg:#0a0f1b;
  --editor-surface:#0f172a;
  --editor-surface-alt:#111c33;
  --editor-panel:#0c152b;
  --editor-border:#2a3550;
  --editor-primary:#4f46e5;
  --editor-secondary:#7c3aed;
  --editor-accent:#22c55e;
  --editor-danger:#ef4444;
  --editor-warning:#f59e0b;
  --editor-text:#e5e7eb;
  --editor-text-muted:#9ca3af;
  --editor-font:'Inter',ui-sans-serif,system-ui,'Segoe UI',Roboto,Arial,sans-serif;
  --editor-radius:14px;

  /* Global sizing + spacing (shared by ALL editors) */
  --editor-font-size:14px;
  --editor-line-height:1.35;
  --editor-control-h:38px;
  --editor-space:12px;
  --editor-space-sm:8px;
}

.editor-theme{
  font-family:var(--editor-font);
  background:
    radial-gradient(1200px circle at 15% -10%, rgba(79,70,229,.20), transparent 55%),
    radial-gradient(900px circle at 85% -20%, rgba(34,197,94,.10), transparent 60%),
    var(--editor-bg);
  background-repeat:no-repeat;
  background-attachment:fixed;
  min-height:100vh;
  color:var(--editor-text);
  font-size:var(--editor-font-size);
  line-height:var(--editor-line-height);
  color-scheme: dark;
} 
.editor-theme, .editor-theme *{box-sizing:border-box;}
.editor-surface{background:var(--editor-surface);border-color:var(--editor-border);color:var(--editor-text);} 
.editor-panel{background:rgba(15,23,42,.78);border-color:var(--editor-border);color:var(--editor-text);} 
.editor-card{background:var(--editor-surface-alt);border-color:var(--editor-border);color:var(--editor-text);} 

.editor-modal-backdrop{background:rgba(2,6,23,.68);backdrop-filter:blur(6px);} 
.editor-modal-content{background:var(--editor-surface);border:1px solid var(--editor-border);border-radius:var(--editor-radius);box-shadow:0 18px 60px rgba(0,0,0,.55);color:var(--editor-text);} 

.editor-toast-container{position:fixed;top:1.25rem;right:1.25rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;} 
.editor-empty-state{padding:1rem;text-align:center;color:var(--editor-text-muted);opacity:.9;} 

.text-accent{color:var(--editor-accent);} 
.text-secondary{color:var(--editor-secondary);} 
.text-primary{color:var(--editor-primary);} 
.bg-light{background:rgba(255,255,255,.05);} 
.border-light{border-color:rgba(255,255,255,.08);} 
.hover\\:bg-light:hover{background:rgba(255,255,255,.06);} 
.hover\\:text-secondary:hover{color:var(--editor-secondary);} 
.focus\\:ring-primary:focus{box-shadow:0 0 0 3px rgba(79,70,229,.22);} 

.editor-theme input[type="text"],
.editor-theme input[type="number"],
.editor-theme input[type="search"],
.editor-theme textarea,
.editor-theme select{
  background:rgba(15,23,42,.65);
  border:1px solid var(--editor-border);
  color:var(--editor-text);
  border-radius:12px;
}

/* Unified form sizing (used by FieldRenderer defaults) */
.editor-input{width:100%;padding:.5rem .65rem;font-size:.9rem;line-height:1.2;}
.editor-textarea{min-height:96px;resize:vertical;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:.9rem;}

/* Unified field wrappers */
.editor-field{
  padding:12px;
  border-radius:12px;
  background:rgba(0,0,0,0.12);
  border:1px solid rgba(255,255,255,0.06);
  box-shadow:0 10px 24px rgba(0,0,0,.22);
}
.editor-field-nested{padding:0;border:0;background:transparent;}
.editor-theme input::placeholder,.editor-theme textarea::placeholder{color:var(--editor-text-muted);opacity:.85;} 
.editor-theme input:focus,.editor-theme textarea:focus,.editor-theme select:focus{outline:none;border-color:rgba(79,70,229,.85);box-shadow:0 0 0 3px rgba(79,70,229,.22);} 
.editor-theme select option{background:var(--editor-surface);color:var(--editor-text);} 

.editor-btn{display:inline-flex;align-items:center;justify-content:center;gap:.45rem;padding:.5rem .75rem;border-radius:11px;font-weight:600;border:1px solid rgba(255,255,255,.08);transition:transform .12s ease,background-color .12s ease,border-color .12s ease,box-shadow .12s ease,color .12s ease;user-select:none;} 
.editor-btn:active{transform:translateY(1px);} 
.editor-btn-secondary{background:rgba(255,255,255,.06);color:var(--editor-text);} 
.editor-btn-secondary:hover{background:rgba(255,255,255,.09);border-color:rgba(255,255,255,.12);} 
.editor-btn.active{background:rgba(99,102,241,0.16);border-color:rgba(99,102,241,0.55);} 

/* List / icon buttons (used by generic list fields) */
.editor-list-item{background:rgba(0,0,0,0.18);border:1px solid var(--editor-border);border-radius:14px;padding:14px;}
.editor-row{
  background:rgba(0,0,0,0.14);
  border:1px solid var(--editor-border);
  border-radius:12px;
  padding:10px;
  transition:background .12s ease,border-color .12s ease,box-shadow .12s ease,transform .12s ease;
  cursor:pointer;
}
.editor-row:hover{background:rgba(0,0,0,0.18);border-color:rgba(99,102,241,.35);box-shadow:0 12px 30px rgba(0,0,0,.35);} 
.editor-db-alert{padding:10px 12px;border-radius:12px;border:1px solid var(--editor-border);background:rgba(255,255,255,0.03);color:var(--editor-text-muted);} 
.editor-icon-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:8px 10px;border-radius:12px;border:1px solid var(--editor-border);background:rgba(255,255,255,0.04);color:var(--editor-text);transition:transform .08s ease,background .15s ease,border-color .15s ease;}
.editor-icon-btn:hover{background:rgba(255,255,255,0.06);border-color:rgba(148,163,184,0.4);} 
.editor-icon-btn:active{transform:translateY(1px);} 
.editor-icon-danger{color:rgba(248,113,113,0.95);border-color:rgba(248,113,113,0.35);background:rgba(248,113,113,0.08);} 
.editor-icon-danger:hover{background:rgba(248,113,113,0.12);border-color:rgba(248,113,113,0.45);} 
.editor-btn-primary{background:rgba(79,70,229,.92);color:#fff;border-color:rgba(79,70,229,.55);box-shadow:0 10px 30px rgba(79,70,229,.18);} 
.editor-btn-primary:hover{background:rgba(79,70,229,1);} 
.editor-btn-danger{background:rgba(239,68,68,.92);color:#fff;border-color:rgba(239,68,68,.55);} 
.editor-btn-danger:hover{background:rgba(239,68,68,1);} 

/* Small utilities used across editors */
.editor-muted-text{color:var(--editor-text-muted);}
.editor-label{color:var(--editor-text);font-weight:600;letter-spacing:.01em;}
.editor-label-block{display:block;margin-bottom:.35rem;}
.editor-nested-label{display:block;margin-bottom:.25rem;font-size:.75rem;color:rgba(229,231,235,.85);font-weight:600;}
.editor-validation-hint{color:rgba(248,113,113,.95);} /* red-400 */
.editor-invalid{border-color:rgba(248,113,113,.8)!important;box-shadow:0 0 0 3px rgba(248,113,113,.16)!important;}

/* Unified input + field wrappers (used by FieldRenderer defaults) */
.editor-input{width:100%;padding:.5rem .65rem;font-size:.9rem;line-height:1.2;}
.editor-textarea{min-height:96px;resize:vertical;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-size:.85rem;}
.editor-field{
  padding:12px;
  border-radius:12px;
  background:rgba(0,0,0,0.12);
  border:1px solid rgba(255,255,255,.06);
  box-shadow:0 10px 24px rgba(0,0,0,.22);
}
.editor-field-nested{padding:0;border:0;background:transparent;}

/* Better dark form defaults with Tailwind Forms plugin */
.editor-theme select{color-scheme:dark;}
.editor-theme input[type="date"],.editor-theme input[type="time"],.editor-theme input[type="datetime-local"]{color-scheme:dark;}

/* Toggle */
.editor-toggle{display:inline-flex;align-items:center;gap:.55rem;user-select:none;}
.editor-toggle input{position:absolute;opacity:0;pointer-events:none;}
.editor-toggle-track{width:44px;height:24px;border-radius:999px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.12);position:relative;transition:background .15s ease,border-color .15s ease;}
.editor-toggle-knob{width:20px;height:20px;border-radius:999px;background:rgba(255,255,255,.88);position:absolute;top:1px;left:1px;transition:transform .15s ease;}
.editor-toggle[data-checked="1"] .editor-toggle-track{background:rgba(79,70,229,.55);border-color:rgba(79,70,229,.45);}
.editor-toggle[data-checked="1"] .editor-toggle-knob{transform:translateX(20px);} 


/* Tailwind Forms plugin class mapping to our sizing */
.editor-theme .form-input,
.editor-theme .form-select,
.editor-theme .form-textarea{
  width:100%;
  padding:.5rem .65rem;
  font-size:.9rem;
  line-height:1.2;
  border-radius:11px;
  background:rgba(15,23,42,.65);
  border:1px solid var(--editor-border);
  color:var(--editor-text);
}
.editor-theme .form-textarea{min-height:96px;resize:vertical;}

/* ------------------------------------------------------------------
   DB Combo (db_select): one input with searchable dropdown
   ------------------------------------------------------------------ */
.editor-dbcombo{position:relative;display:flex;flex-direction:column;gap:.45rem;min-width:0;}
.editor-dbcombo-control{position:relative;min-width:0;}
.editor-dbcombo-input{padding-right:2.25rem;}
.editor-dbcombo-clear{
  position:absolute;right:.6rem;top:50%;transform:translateY(-50%);
  width:1.5rem;height:1.5rem;border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  color:rgba(255,255,255,.85);
}
.editor-dbcombo-clear:hover{background:rgba(255,255,255,.10);border-color:rgba(255,255,255,.14);} 
.editor-dbcombo-clear:disabled{opacity:.45;cursor:not-allowed;}

.editor-dbcombo-dropdown{
  display:none;
  position:absolute;
  left:0;right:0;
  top:calc(var(--editor-control-h) + .55rem);
  z-index:500;
  max-height:280px;
  overflow:auto;
  border-radius:14px;
  background:rgba(10,16,30,.96);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:0 10px 30px rgba(0,0,0,.45);
  padding:.35rem;
}

.editor-dbcombo-dropdown-portal{position:fixed;left:0;top:0;right:auto;bottom:auto;z-index:10000;}
.editor-dbcombo-dropdown.open{display:block;}
.editor-dbcombo-empty{padding:.65rem .75rem;font-size:.9rem;opacity:.75;}
.editor-dbcombo-option{
  display:flex;align-items:center;justify-content:flex-start;text-align:left;
  width:100%;padding:.5rem .65rem;border-radius:12px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
  transition:background .15s ease,border-color .15s ease;
}
.editor-dbcombo-option:hover{background:rgba(255,255,255,.07);border-color:rgba(255,255,255,.10);} 
.editor-dbcombo-option.active{background:rgba(99,102,241,0.18);border-color:rgba(99,102,241,0.35);} 

/* Fallback numeric input visibility */
.editor-dbcombo-bound{display:none;}
.editor-dbcombo[data-db-state="connected"] .editor-dbcombo-bound{display:none;}
.editor-dbcombo[data-db-state="disconnected"] .editor-dbcombo-control{display:none;}
.editor-dbcombo[data-db-state="disconnected"] .editor-dbcombo-dropdown{display:none;}
.editor-dbcombo[data-db-state="disconnected"] .editor-dbcombo-bound{display:block;}

/* TagSelect (chips + search) */
.editor-tags{display:flex;flex-direction:column;gap:.6rem;min-width:0;}
.editor-tags-selected{display:flex;flex-wrap:wrap;gap:.5rem;max-height:7.5rem;overflow:auto;padding-right:.15rem;}
.editor-tags-empty{font-size:.85rem;opacity:.75;}
.editor-tag{display:inline-flex;align-items:center;gap:.45rem;max-width:100%;padding:.35rem .55rem;border-radius:999px;background:rgba(79,70,229,.18);border:1px solid rgba(79,70,229,.28);color:rgba(255,255,255,.95);transition:background .15s ease,border-color .15s ease;}
.editor-tag-label{max-width:22rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.editor-tag:hover{background:rgba(79,70,229,.24);border-color:rgba(79,70,229,.40);}
.editor-tag-x{opacity:.85;font-weight:700;}
.editor-tags-searchrow{display:flex;}
.editor-tags-options{max-height:220px;overflow:auto;border-radius:12px;background:rgba(0,0,0,0.10);border:1px solid rgba(255,255,255,.06);}
.editor-tags-options-inner{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:.35rem;padding:.4rem;}
.editor-tag-option{display:flex;align-items:center;justify-content:flex-start;text-align:left;width:100%;padding:.45rem .6rem;border-radius:10px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);transition:background .15s ease,border-color .15s ease;}
.editor-tag-option:hover{background:rgba(255,255,255,.07);border-color:rgba(255,255,255,.10);} 
.editor-tag-option.active{background:rgba(99,102,241,0.18);border-color:rgba(99,102,241,0.35);} 
.editor-tag-option-strong{font-weight:700;}

/* ------------------------------------------------------------------
   Global form + layout alignment (applies to all editors)
   ------------------------------------------------------------------ */

/* Field wrapper behaves like a consistent vertical stack */
.editor-field{display:flex;flex-direction:column;gap:.45rem;}
.editor-field-nested{display:block;}
.editor-field,.editor-field-nested,.editor-dbcombo,.editor-dbcombo-control{min-width:0;}

/* ------------------------------------------------------------------
   Unified grid container for list items (layout: 'grid')
   Allows per-field templates via CSS vars.
   ------------------------------------------------------------------ */
.editor-grid-fields{
  display:grid;
  gap:var(--editor-grid-gap,.75rem);
  grid-template-columns:var(--editor-grid-template,1fr);
  min-width:0;
}
@media (min-width:768px){
  .editor-grid-fields{
    grid-template-columns:var(--editor-grid-template-md,repeat(2,minmax(0,1fr)));
  }
}
@media (min-width:1024px){
  .editor-grid-fields{
    grid-template-columns:var(--editor-grid-template-lg,var(--editor-grid-template-md,repeat(2,minmax(0,1fr))));
  }
}
.editor-theme .grid > *{min-width:0;}
.editor-label-block{margin-bottom:0;}

/* Consistent control height across inputs/selects */
.editor-input,
.editor-theme .form-input,
.editor-theme .form-select,
.editor-theme .form-textarea{
  min-height:var(--editor-control-h);
}

/* Ensure plain <select> / <textarea> (without Tailwind classes) still look correct */
.editor-theme select{
  min-height:var(--editor-control-h);
  padding:.5rem .65rem;
  font-size:.9rem;
  line-height:1.2;
  border-radius:11px;
}
.editor-theme textarea{
  padding:.65rem .75rem;
}

/* Section helper (optional, can be used by editors) */
.editor-section{
  background:rgba(0,0,0,0.10);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:16px;
  padding:var(--editor-space);
}
.editor-section + .editor-section{margin-top:var(--editor-space);}


/* ------------------------------------------------------------------
   Unified scrollbars (ALL editors)
   ------------------------------------------------------------------ */
/* Firefox */
.editor-theme{scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.14) transparent;}
.editor-theme *{scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.14) transparent;}

/* WebKit */
.editor-theme ::-webkit-scrollbar{width:10px;height:10px;}
.editor-theme ::-webkit-scrollbar-track{background:rgba(0,0,0,.18);border-radius:999px;}
.editor-theme ::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:999px;border:2px solid rgba(0,0,0,0);background-clip:padding-box;}
.editor-theme ::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.18);}

/* Optional helper for explicit scroll containers */
.editor-scroll{overflow:auto;}

/* ------------------------------------------------------------------
   Shared UI micro-components (keep markup simple across editors)
   ------------------------------------------------------------------ */
.editor-badge{display:inline-flex;align-items:center;gap:.35rem;padding:.25rem .55rem;border-radius:999px;font-size:.75rem;font-weight:700;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.06);color:rgba(229,231,235,.95);}

/* Readonly value block that visually matches inputs */
.editor-readonly{min-height:var(--editor-control-h);padding:.55rem .75rem;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(0,0,0,0.16);display:flex;align-items:center;color:rgba(229,231,235,.92);}

/* Sticky toolbar (used by editors with long forms) */
.editor-sticky-toolbar{position:sticky;top:12px;z-index:30;background:linear-gradient(180deg, rgba(17,28,51,.92) 0%, rgba(17,28,51,.78) 100%);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px;backdrop-filter:blur(10px);box-shadow:0 18px 50px rgba(0,0,0,.40);}

/* Icon+input search row */
.editor-search{position:relative;}
.editor-search i{position:absolute;left:12px;top:50%;transform:translateY(-50%);opacity:.85;}
.editor-search input{padding-left:2.35rem;}

/* Helper row header for compact list rows */
.editor-columns-header{display:grid;gap:12px;align-items:center;padding:8px 12px;border:1px solid rgba(255,255,255,.06);border-radius:14px;background:rgba(255,255,255,.03);color:rgba(229,231,235,.78);font-size:12px;margin-top:10px;margin-bottom:10px;}
.editor-columns-header .muted{color:rgba(229,231,235,.55);}

/* Details (raw blocks) */
.editor-details{border:1px solid rgba(255,255,255,.06);border-radius:14px;background:rgba(255,255,255,.03);}
.editor-details summary{cursor:pointer;list-style:none;padding:10px 12px;font-size:12px;color:rgba(229,231,235,.75);display:flex;align-items:center;justify-content:space-between;}
.editor-details summary::-webkit-details-marker{display:none;}
.editor-details .editor-details-body{padding:0 12px 12px 12px;}

/* ------------------------------------------------------------------
   Mobile drawer (off-canvas sidebar)
   Used by editors that have a left sidebar (mobs / vouchers etc.)
   ------------------------------------------------------------------ */
.editor-drawer{min-width:0;}
.editor-drawer-backdrop{display:none;}
@media (max-width: 767px){
  .editor-drawer{position:fixed;top:0;left:0;bottom:0;z-index:600;transform:translateX(-110%);transition:transform .18s ease;width:20rem;max-width:90vw;}
  .editor-drawer.open{transform:translateX(0);} 
  .editor-drawer-backdrop{display:block;position:fixed;inset:0;z-index:590;background:rgba(0,0,0,.55);opacity:0;pointer-events:none;transition:opacity .18s ease;}
  .editor-drawer-backdrop.open{opacity:1;pointer-events:auto;}
}
@media (min-width: 768px){
  .editor-drawer{position:relative;transform:none;z-index:auto;width:auto;max-width:none;}
  .editor-drawer-backdrop{display:none!important;}
}

/* ------------------------------------------------------------------
   Global small-screen tweaks
   ------------------------------------------------------------------ */
@media (max-width: 640px) {
  .editor-tags-selected{max-height:9.5rem;}
  .editor-tag-label{max-width:14rem;}
  .editor-tags-options{max-height:180px;}
  .editor-tags-options-inner{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));}
  .editor-toast-container{left:1rem;right:1rem;}
}
