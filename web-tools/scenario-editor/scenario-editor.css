/* Небольшие кастомные стили */
:root {
	--scenario-scrollbar-track: var(--color-bg-dark);
	--scenario-scrollbar-thumb: var(--color-accent);
	--scenario-scrollbar-thumb-hover: var(--color-accent-strong);
	--scenario-bg-main: var(--color-bg-dark);
	--scenario-bg-surface: var(--color-bg-medium);
	--scenario-bg-card: var(--color-bg-light);
	--scenario-accent: var(--color-accent);
	--scenario-accent-strong: var(--color-accent-strong);
	--scenario-text: var(--color-text);
	--scenario-text-muted: var(--color-text-muted);
	--scenario-border: var(--color-border);
	--scenario-success: var(--color-success);
	--scenario-warning: var(--color-warning);
	--scenario-danger: var(--color-danger);
}

body,
#navigator,
#editor-wrapper,
#modal-form-container {
	scrollbar-width: thin;
	scrollbar-color: var(--scenario-scrollbar-thumb) var(--scenario-scrollbar-track);
}

body::-webkit-scrollbar,
#navigator::-webkit-scrollbar,
#editor-wrapper::-webkit-scrollbar,
#modal-form-container::-webkit-scrollbar {
	width: 12px;
	height: 12px;
}

body::-webkit-scrollbar-track,
#navigator::-webkit-scrollbar-track,
#editor-wrapper::-webkit-scrollbar-track,
#modal-form-container::-webkit-scrollbar-track {
	background: var(--scenario-scrollbar-track);
	border-radius: 999px;
}

body::-webkit-scrollbar-thumb,
#navigator::-webkit-scrollbar-thumb,
#editor-wrapper::-webkit-scrollbar-thumb,
#modal-form-container::-webkit-scrollbar-thumb {
	background: linear-gradient(180deg, #93c5fd 0%, var(--scenario-scrollbar-thumb) 60%, #2563eb 100%);
	border-radius: 999px;
	border: 3px solid var(--scenario-scrollbar-track);
	box-shadow: inset 0 0 4px rgba(30, 64, 175, 0.35);
}

body::-webkit-scrollbar-thumb:hover,
#navigator::-webkit-scrollbar-thumb:hover,
#editor-wrapper::-webkit-scrollbar-thumb:hover,
#modal-form-container::-webkit-scrollbar-thumb:hover {
	background: linear-gradient(180deg, #bfdbfe 0%, var(--scenario-scrollbar-thumb-hover) 60%, #1d4ed8 100%);
}

.sortable-ghost {
	opacity: 0.4;
	background: #c8ebfb;
	border: 2px dashed #3498db;
}
#navigator-tree .sortable-ghost {
	background: #e0f7fa;
	border: 1px dashed #3498db;
	border-radius: 4px;
}
#navigator-tree .sortable-ghost * {
	opacity: 0.5;
}
.nav-component-list.empty-drop-zone {
	min-height: 30px;
	background-color: rgba(240, 249, 255, 0.5);
	border: 1px dashed #93c5fd;
	border-radius: 4px;
	margin-top: 4px;
}
.connection-line {
	stroke-width: 2px;
	stroke: #8e44ad; /* purple-600 */
	fill: none;
	stroke-dasharray: 5, 5;
	pointer-events: none;
}
.connection-arrow {
	fill: #8e44ad; /* purple-600 */
	pointer-events: none;
}
.toggle-checkbox:checked {
	right: 0;
	border-color: #2563eb;
}
.toggle-checkbox:checked + .toggle-label {
	background-color: #2563eb;
}
/* Compact navigator styles */
.nav-group-wrapper {
	margin-bottom: 0.5rem; /* 8px */
	padding: 0.25rem; /* 4px */
}
.nav-group-header {
	padding: 0.25rem 0.5rem; /* 4px 8px */
}
.nav-step-list a, .nav-component-list a {
	padding: 0.25rem 0.5rem; /* 4px 8px */
	font-size: 0.875rem; /* 14px */
}
.nav-component-list {
	padding-left: 0.75rem; /* 12px */
	margin-left: 0.5rem; /* 8px */
}
.nav-group-controls {
	opacity: 0;
	transition: opacity 0.2s ease-in-out;
}
.nav-group-header:hover .nav-group-controls {
	opacity: 1;
}
body.embedded {
	background: #0f172a;
	color: #e2e8f0;
	--scenario-scrollbar-track: rgba(15, 23, 42, 0.9);
	--scenario-scrollbar-thumb: rgba(56, 189, 248, 0.85);
	--scenario-scrollbar-thumb-hover: rgba(14, 165, 233, 0.95);
}
body.scenario-editor {
	background: var(--scenario-bg-main);
	color: var(--scenario-text);
	--scenario-scrollbar-track: rgba(15, 23, 42, 0.9);
	--scenario-scrollbar-thumb: rgba(56, 189, 248, 0.85);
	--scenario-scrollbar-thumb-hover: rgba(14, 165, 233, 0.95);
}
body.scenario-editor .bg-white {
	background: var(--scenario-bg-surface);
}
body.scenario-editor .bg-slate-50 {
	background: rgba(56, 189, 248, 0.08);
}
body.scenario-editor .bg-slate-100 {
	background: var(--scenario-bg-card);
}
body.scenario-editor .text-slate-800,
body.scenario-editor .text-slate-700 {
	color: var(--scenario-text);
}
body.scenario-editor .text-slate-600,
body.scenario-editor .text-slate-500 {
	color: var(--scenario-text-muted);
}
body.scenario-editor .border-slate-200,
body.scenario-editor .border-slate-300 {
	border-color: var(--scenario-border);
}
body.scenario-editor .shadow-sm,
body.scenario-editor .shadow-md,
body.scenario-editor .shadow-xl {
	box-shadow: 0 14px 40px rgba(15, 23, 42, 0.35);
}
body.scenario-editor header {
	background: var(--scenario-bg-surface);
	border-color: var(--scenario-border);
	box-shadow: 0 1px 0 rgba(148, 163, 184, 0.08);
}
body.scenario-editor header h1 i {
	color: var(--scenario-accent);
}
body.scenario-editor #navigator {
	background: var(--scenario-bg-surface);
	border-color: var(--scenario-border);
}
body.scenario-editor .navigator-header {
	background: var(--scenario-bg-main);
	border-color: var(--scenario-border);
}
body.scenario-editor .step-card,
body.scenario-editor .component-item,
body.scenario-editor #modal-content,
body.scenario-editor #delete-group-modal-backdrop > div,
body.scenario-editor #add-component-menu {
	background: var(--scenario-bg-surface);
	border-color: var(--scenario-border);
}
body.scenario-editor .step-header {
	background: rgba(15, 23, 42, 0.6);
	border-color: var(--scenario-border);
}
body.scenario-editor .step-id-display {
	background: rgba(56, 189, 248, 0.2);
	color: var(--scenario-text);
}
body.scenario-editor .components-container {
	border-color: rgba(148, 163, 184, 0.2);
}
body.scenario-editor input,
body.scenario-editor select,
body.scenario-editor textarea {
	background: var(--scenario-bg-card);
	color: var(--scenario-text);
	border-color: var(--scenario-border);
}
body.scenario-editor input:focus,
body.scenario-editor select:focus,
body.scenario-editor textarea:focus {
	border-color: var(--scenario-accent);
	box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.2);
}
body.scenario-editor .control-btn {
	color: var(--scenario-text-muted);
}
body.scenario-editor .control-btn:hover {
	background: rgba(148, 163, 184, 0.16);
}
body.scenario-editor .nav-group-header.bg-blue-50 {
	background: rgba(56, 189, 248, 0.12);
	border-color: rgba(56, 189, 248, 0.25);
}
body.embedded header {
	position: sticky;
	top: 0;
	z-index: 60;
	border-radius: 0 0 16px 16px;
	background: #111827;
	border-color: #1e293b;
}
body.embedded .main-container {
	background: #0b1220;
	min-height: calc(100vh - 70px);
	border-radius: 16px;
	overflow: visible;
	margin: 10px 16px 16px;
	box-shadow: 0 18px 50px rgba(15, 23, 42, 0.45);
	gap: 18px;
}
body.embedded header {
	padding: 12px 20px;
}
body.embedded header .controls {
	gap: 12px;
	flex-wrap: wrap;
}
body.embedded header .controls .relative {
	width: 44px;
	height: 22px;
}
body.embedded header .controls label {
	color: #cbd5f5;
}
body.embedded header .controls input,
body.embedded header .controls select {
	min-width: 160px;
}
body.embedded header .controls .bg-red-100 {
	background: rgba(248, 113, 113, 0.18);
	color: #fca5a5;
}
body.embedded header .controls .bg-blue-600 {
	background: #2563eb;
}
body.embedded #navigator {
	height: calc(100vh - 102px);
	background: #0f172a;
	border-color: #1e293b;
}
body.embedded #editor-wrapper {
	padding: 24px;
}
body.embedded #connections-svg-container {
	top: 70px;
}
body.embedded .step-card,
body.embedded .component-item,
body.embedded #modal-content,
body.embedded #delete-group-modal-backdrop > div {
	background: #111827;
	border-color: #1e293b;
	color: #e2e8f0;
}
body.embedded .step-header,
body.embedded .navigator-header {
	background: #0f172a;
	border-color: #1e293b;
}
body.embedded .nav-group-header,
body.embedded .nav-step-list a,
body.embedded .nav-component-list a {
	color: #e2e8f0;
}
body.embedded .nav-step-list a:hover,
body.embedded .nav-component-list a:hover {
	background: rgba(56, 189, 248, 0.12);
}
body.embedded .nav-step-list a.active,
body.embedded .nav-component-list a.active {
	background: rgba(56, 189, 248, 0.25);
	color: #e2e8f0;
}
body.embedded .nav-group-header.bg-blue-50 {
	background: rgba(56, 189, 248, 0.15);
	border-color: rgba(56, 189, 248, 0.35);
}
body.embedded .nav-group-header.text-blue-800,
body.embedded .nav-group-header .text-blue-700,
body.embedded .nav-group-header .text-blue-600 {
	color: #bae6fd;
}
body.embedded .nav-group-wrapper,
body.embedded .nav-step-list,
body.embedded .nav-component-list {
	background: #0b1220;
	border-color: #1e293b;
}
body.embedded .nav-group-wrapper {
	border: 1px solid rgba(56, 189, 248, 0.22);
	box-shadow: none;
}
body.embedded .nav-group-header {
	background: #0f172a;
	border-color: rgba(56, 189, 248, 0.2);
}
body.embedded .nav-group-header:hover {
	background: rgba(56, 189, 248, 0.08);
}
body.embedded .nav-step-list a,
body.embedded .nav-component-list a {
	background: transparent;
	border-color: transparent;
}
body.embedded .nav-step-list a.active,
body.embedded .nav-component-list a.active {
	background: rgba(56, 189, 248, 0.18);
	border-color: rgba(56, 189, 248, 0.35);
}
body.embedded .connection-line {
	stroke: #38bdf8;
	stroke-width: 3px;
	stroke-dasharray: 8 6;
	filter: drop-shadow(0 0 6px rgba(56, 189, 248, 0.45));
}
body.embedded .connection-arrow {
	fill: #38bdf8;
	filter: drop-shadow(0 0 4px rgba(56, 189, 248, 0.45));
}
body.embedded .text-slate-800,
body.embedded .text-slate-700,
body.embedded .text-slate-600,
body.embedded .text-slate-500 {
	color: #cbd5f5;
}
body.embedded .border-slate-200 {
	border-color: #1e293b;
}
body.embedded .bg-white {
	background-color: #111827;
}
body.embedded .bg-slate-50,
body.embedded .bg-slate-100 {
	background-color: #0b1220;
}
body.embedded .modal-buttons button,
body.embedded .add-button {
	color: #e2e8f0;
}
body.embedded input,
body.embedded select,
body.embedded textarea {
	background: #0b1220;
	border-color: #1e293b;
	color: #e2e8f0;
}
body.embedded input::placeholder,
body.embedded textarea::placeholder {
	color: #94a3b8;
}
body.embedded select option {
	background: #0b1220;
	color: #e2e8f0;
}
body.embedded .toggle-label {
	background-color: #1e293b;
	border: 1px solid #334155;
	height: 22px;
}
body.embedded .toggle-checkbox:checked + .toggle-label {
	background-color: #38bdf8;
}
body.embedded .toggle-checkbox {
	width: 22px;
	height: 22px;
	border-width: 2px;
	border-color: #334155;
	background: #0f172a;
	box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.15);
	top: 0;
	left: 0;
}
body.embedded .control-btn:hover {
	background: rgba(148, 163, 184, 0.15);
}
body.embedded .add-button,
body.embedded #add-step-button {
	background: #1f2937;
	color: #e2e8f0;
	border: 1px solid #334155;
}
body.embedded .add-button:hover,
body.embedded #add-step-button:hover {
	background: #334155;
}
body.embedded #add-step-button {
	background: linear-gradient(90deg, #2563eb, #38bdf8);
	border: none;
	color: #f8fafc;
}
body.embedded #add-step-button:hover {
	background: linear-gradient(90deg, #1d4ed8, #0ea5e9);
}
body.embedded #modal-save {
	background: #22c55e;
	border-color: #16a34a;
	color: #f8fafc;
}
body.embedded #modal-cancel {
	background: #1f2937;
	border-color: #334155;
}
body.embedded #delete-group-and-steps-btn {
	background: #ef4444;
	border-color: #dc2626;
}
body.embedded #delete-group-only-btn {
	background: #f59e0b;
	border-color: #d97706;
}
body.embedded #add-group-btn {
	background: #1e293b;
	color: #e2e8f0;
	border: 1px solid #334155;
}
body.embedded #add-group-btn:hover {
	background: #334155;
}
body.embedded .modal-buttons button,
body.embedded #delete-group-modal-backdrop button {
	background: #1f2937;
	border: 1px solid #334155;
	color: #e2e8f0;
}
body.embedded .modal-buttons button:hover,
body.embedded #delete-group-modal-backdrop button:hover {
	background: #334155;
}
